import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as e,o as p}from"./app-CrA-f6So.js";const i={};function l(c,n){return p(),a("div",null,n[0]||(n[0]=[e(`<h1 id="_28-concepts-å¦‚ä½•å¯¹æ¨¡æ¿è¿›è¡Œçº¦æŸ" tabindex="-1"><a class="header-anchor" href="#_28-concepts-å¦‚ä½•å¯¹æ¨¡æ¿è¿›è¡Œçº¦æŸ"><span>28 _ Conceptsï¼šå¦‚ä½•å¯¹æ¨¡æ¿è¿›è¡Œçº¦æŸ_</span></a></h1><p><audio id="audio" title="28 | Conceptsï¼šå¦‚ä½•å¯¹æ¨¡æ¿è¿›è¡Œçº¦æŸ?" controls="" preload="none"><source id="mp3" src="https://static001.geekbang.org/resource/audio/74/7d/74c10f01ecaa217624ce93a2747f387d.mp3"></audio></p><p>ä½ å¥½ï¼Œæˆ‘æ˜¯å´å’ç‚œã€‚</p><p>ä»è¿™ä¸€è®²å¼€å§‹ï¼Œæˆ‘ä»¬è¿›å…¥äº†æœªæ¥ç¯‡ï¼Œå±•æœ›ä¸€ä¸‹å³å°†åœ¨ C++20 å‡ºç°çš„æ–°åŠŸèƒ½ã€‚æˆ‘ä»¬ç¬¬ä¸€ä¸ªè¦è®¨è®ºçš„ï¼Œæ˜¯ conceptsï¼ˆæ¦‚å¿µï¼‰â€”â€”ä¸€ä¸ªéš¾äº§äº†å¾ˆå¤šå¹´æ‰ç»ˆäºè¿›å…¥ C++ çš„æ–°åŠŸèƒ½ã€‚</p><h2 id="ä¸€ä¸ªå°ä¾‹å­" tabindex="-1"><a class="header-anchor" href="#ä¸€ä¸ªå°ä¾‹å­"><span>ä¸€ä¸ªå°ä¾‹å­</span></a></h2><p>è€è§„çŸ©ï¼Œè¦è®²â€œæ¦‚å¿µâ€ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¾‹å­ã€‚</p><p>æˆ‘ä»¬çŸ¥é“ C++ é‡Œæœ‰é‡è½½ï¼Œå¯ä»¥æ ¹æ®å‚æ•°çš„ç±»å‹æ¥é€‰æ‹©åˆé€‚çš„å‡½æ•°ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ <code>half</code> å¯¹äº <code>int</code> å’Œ <code>string</code> æœ‰ä¸åŒçš„ä½œç”¨ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>int half(int n)</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  return n / 2;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>string half(string s)</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  s.resize(s.size() / 2);</span></span>
<span class="line"><span>  return s;</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆçœ‹ï¼Œä¼¼ä¹é‡è½½å¯ä»¥è§£å†³é—®é¢˜ï¼Œä½†ç»†æƒ³ï¼Œä¸å¯¹å•Šï¼šé™¤äº† <code>int</code>ï¼Œæˆ‘ä»¬è¿˜æœ‰å·®ä¸å¤šçš„ <code>short</code>ã€<code>long</code> ç­‰ç±»å‹ï¼Œç”šè‡³è¿˜æœ‰ <code>boost::multiprecision::cpp_int</code>ï¼›é™¤äº† <code>string</code>ï¼Œæˆ‘ä»¬ä¹Ÿè¿˜æœ‰ <code>wstring</code>ã€<code>u16string</code>ã€<code>u32string</code> ç­‰ç­‰ã€‚ä¸Šé¢çš„æ¯ä¸ªå‡½æ•°ï¼Œå®é™…ä¸Šéƒ½é€‚ç”¨äºä¸€æ—ç±»å‹ï¼Œè€Œä¸æ˜¯å•ä¸ªç±»å‹ã€‚é‡è½½åœ¨è¿™æ–¹é¢å¹¶å¸®ä¸äº†ä»€ä¹ˆå¿™ã€‚</p><p>ä¹Ÿè®¸ä½ ç°åœ¨å·²ç»ååº”è¿‡æ¥äº†ï¼Œæˆ‘ä»¬æœ‰ SFINAE å•Šï¼å›ç­”éƒ¨åˆ†æ­£ç¡®ã€‚å¯æ˜¯ï¼Œä½ å‘Šè¯‰æˆ‘ä½ æœ‰æ²¡æœ‰æƒ³åˆ°ä¸€ç§å¾ˆç®€å•çš„æ–¹å¼èƒ½è®© SFINAE å¯¹æ•´æ•°ç±»å‹å¯ä»¥å·¥ä½œï¼ŸType traitsï¼Ÿå—¯å—¯ï¼Œæ€»æ˜¯å¯ä»¥è§£å†³çš„æ˜¯å§ï¼Œä½†è¿™ä¼šä¸ä¼šæ˜¯ä¸€æ¡æŠŠåˆå­¦è€…åŠé€€çš„é“è·¯å‘¢ï¼Ÿâ€¦â€¦</p><p>C++ çš„æ¦‚å¿µå°±æ˜¯ç”¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜çš„ã€‚å¯¹äºä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬åªéœ€è¦äº‹å…ˆå®šä¹‰äº† <code>Integer</code> å’Œ <code>String</code> çš„æ¦‚å¿µï¼ˆå¦‚ä½•å®šä¹‰ä¸€ä¸ªæ¦‚å¿µæˆ‘ä»¬åé¢ä¼šè¯´ï¼‰ï¼Œæˆ‘ä»¬å°±å¯ä»¥å†™å‡ºä¸‹é¢è¿™æ ·çš„ä»£ç ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>template &amp;lt;Integer N&amp;gt;</span></span>
<span class="line"><span>N half(N n)</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  return n / 2;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>template &amp;lt;String S&amp;gt;</span></span>
<span class="line"><span>S half(S s)</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  s.resize(s.size() / 2);</span></span>
<span class="line"><span>  return s;</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬åº”å½“äº†è§£ä¸€ä¸‹ï¼Œä»æ¦‚å¿µä¸Šè®²ï¼Œä¸Šé¢è¿™ç§å½¢å¼çš„å«ä¹‰å’Œä¸‹é¢çš„ä»£ç å®è´¨ç›¸åŒï¼ˆä»¥ä¸Šé¢çš„ç¬¬ä¸€ä¸ªå‡½æ•°ä¸ºä¾‹ï¼‰ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>template &amp;lt;typename N&amp;gt;</span></span>
<span class="line"><span>  requires Integer&amp;lt;N&amp;gt;</span></span>
<span class="line"><span>N half(N n)</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  return n / 2;</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å³ï¼Œè¿™ä¸ª <code>half</code> æ˜¯ä¸€ä¸ªå‡½æ•°æ¨¡æ¿ï¼Œæœ‰ä¸€ä¸ªæ¨¡æ¿å‚æ•°ï¼Œå¯ç”¨è¿™ä¸ªæ¨¡æ¿çš„å‰ææ¡ä»¶æ˜¯è¿™ä¸ªå‚æ•°æ»¡è¶³ <code>Integer</code> è¿™ä¸ªçº¦æŸã€‚</p><h2 id="concepts-ç®€å²" tabindex="-1"><a class="header-anchor" href="#concepts-ç®€å²"><span>Concepts ç®€å²</span></a></h2><p>2019 å¹´ 11 æœˆï¼Œä¸Šæµ·ï¼Œå½“åœ¨ C++ å³°ä¼šä¸Šè¢«é—®èµ·ä»–æœ€å–œæ¬¢çš„ C++ ç‰¹æ€§æœ‰å“ªäº›æ—¶ï¼ŒBjarne çš„å›ç­”é‡Œå°±æœ‰ conceptsã€‚è¿™ä¸æ¯«ä¸è®©æˆ‘æ„Ÿåˆ°æƒŠè®¶ã€‚è™½ç„¶ C++ çš„â€œæ¦‚å¿µâ€çœ‹èµ·æ¥æ˜¯ä¸ªæŒºç®€å•çš„æ¦‚å¿µï¼Œä½†å®ƒçš„å†å²å¹¶ä¸çŸ­â€”â€”Bjarne æƒ³æŠŠå®ƒåŠ å…¥ C++ å·²ç»æœ‰å¥½å¤šå¹´äº† [1]ã€‚</p><p>ä»åŸºæœ¬æ¦‚å¿µä¸Šæ¥è®²ï¼Œâ€œæ¦‚å¿µâ€å°±æ˜¯ä¸€ç»„å¯¹æ¨¡æ¿å‚æ•°çš„çº¦æŸæ¡ä»¶ã€‚æˆ‘ä»¬è®¨è®ºè¿‡æ¨¡æ¿å°±æ˜¯ C++ é‡Œçš„é¸­å­ç±»å‹ï¼Œä½†æˆ‘ä»¬æ²¡æœ‰æè¿‡ï¼ŒBjarne å¯¹æ¨¡æ¿çš„æ¥å£å®é™…ä¸Šæ˜¯ç›¸å½“ä¸æ»¡æ„çš„ï¼šä»–è‡ªå·±çš„ç”¨è¯ç›´æ¥å°±æ˜¯ lousyï¼Œå¹¶è®¤ä¸ºè¿™ä¸€ç³Ÿç³•çš„æ¥å£è®¾è®¡æ˜¯åé¢å¯¼è‡´äº†ææ€–çš„æ¨¡æ¿ç¼–è¯‘é”™è¯¯ä¿¡æ¯çš„æ ¹æºã€‚</p><p>ä»å¦ä¸€æ–¹é¢è®²ï¼ŒAlex Stepanov è®¾è®¡çš„ STL ä¸€å¼€å§‹å°±åŒ…å«äº†â€œæ¦‚å¿µâ€çš„æ¦‚å¿µï¼Œå¦‚æˆ‘ä»¬åœ¨<a href="https://time.geekbang.org/column/article/176842" target="_blank" rel="noopener noreferrer">[ç¬¬ 7 è®²]</a> ä¸­æåˆ°çš„å„ç§ä¸åŒç±»å‹çš„è¿­ä»£å™¨ï¼š</p><ul><li>Output Iterator</li><li>Input Iterator</li><li>Forward Iterator</li><li>Bidirectional Iterator</li><li>Random Access Iterator</li><li>â€¦</li></ul><p>è¿™äº›æ¦‚å¿µå‡ºç°åœ¨äº† STL çš„æ–‡æ¡£ä¸­ï¼Œæœ‰è¯¦ç»†çš„å®šä¹‰ï¼›ä½†å®ƒä»¬åªæ˜¯è½åœ¨çº¸é¢ä¸Šï¼Œè€Œæ²¡æœ‰åœ¨ C++ è¯­è¨€ä¸­æœ‰çœŸæ­£çš„ä½“ç°ã€‚åæ¥ï¼Œä»–è¿˜è¿›ä¸€æ­¥æŠŠå¾ˆå¤šæ¦‚å¿µçš„å½¢å¼æè¿°å†™è¿›äº†ä»–äº 2009 å¹´ï¼ˆå’Œ Paul McJones ä¸€èµ·ï¼‰å‡ºç‰ˆçš„â€œç¥ä½œâ€ <strong>Elements of Programming</strong> [2] ä¸­ï¼Œå¹¶ç»™å‡ºäº†å‡æƒ³çš„å®ç°ä»£ç â€”â€”å…¶ä¸­å°±æœ‰å…³é”®å­— <code>requires</code>â€”â€”å³ä½¿é‚£æ—¶æ²¡æœ‰ä»»ä½•ç¼–è¯‘å™¨èƒ½å¤Ÿç¼–è¯‘è¿™æ ·çš„ä»£ç ã€‚</p><p>åœ¨ C++ ç¬¬ä¸€æ¬¡æ ‡å‡†åŒ–ï¼ˆ1998ï¼‰ä¹‹åï¼ŒBjarne å¤šæ¬¡è¯•å›¾æŠŠâ€œæ¦‚å¿µâ€å¼•å…¥ C++ï¼ˆæ ¹æ®æˆ‘çœ‹åˆ°çš„æ–‡çŒ®ï¼Œä»–åœ¨ 03 åˆ° 09 å¹´ç›´æ¥æœ‰è‡³å°‘ä¹ç¯‡å•ç‹¬æˆ–åˆè‘—çš„è®ºæ–‡è·Ÿâ€œæ¦‚å¿µâ€æœ‰å…³ï¼‰ï¼Œä½†ä¸€ç›´æ²¡æœ‰æˆåŠŸâ€”â€”é­”é¬¼åœ¨ç»†èŠ‚ï¼Œä¸€æ—¦è¿›å…¥ç»†èŠ‚ï¼Œäººä»¬å¯¹ä¸€ä¸ªçœ‹èµ·æ¥å¾ˆç¾çš„ç‚¹å­çš„åˆ†æ­§å°±éå¸¸å¤§äº†ã€‚ä¸€ç›´åˆ° C++11 æ ‡å‡†åŒ–ï¼Œâ€œæ¦‚å¿µâ€ è¿˜æ˜¯å› ä¸ºè‰æ¡ˆå¤æ‚ã€äº‰è®®å¤šã€æ— æˆç†Ÿå®ç°è€Œæ²¡æœ‰è¿›å…¥ C++ æ ‡å‡†ã€‚</p><p>ç›®å‰ C++20 é‡Œçš„â€œæ¦‚å¿µâ€çš„åŸºç¡€æ˜¯ 2009 å¹´é‡æ–°å¯åŠ¨çš„ Concepts Liteï¼Œå¹¶åœ¨ 2015 å¹´å‡ºç‰ˆæˆä¸ºæŠ€æœ¯è§„æ ¼ä¹¦ Concepts TSï¼ˆæ­£å¼çš„ TS æ–‡æ¡£éœ€è¦èŠ±é’±è´­ä¹°ï¼Œæˆ‘ä»¬éœ€è¦è¿›ä¸€æ­¥äº†è§£å¯ä»¥æŸ¥çœ‹æ­£å¼å‡ºç‰ˆå‰çš„è‰æ¡ˆ [3]ï¼‰ã€‚å¾ˆå¤šäººå‚ä¸äº†ç›¸å…³å·¥ä½œï¼Œå…¶ä¸­å°±åŒ…æ‹¬äº† Andrew Suttonã€Bjarne Stroustrup å’Œ Alex Stepanovã€‚è¿™å›ï¼Œå®ç°ç®€åŒ–äº†ï¼Œæœ‰äº†ä¸€ä¸ªå®ç°ï¼ˆGCCï¼‰ï¼Œäº‰è®®ä¹Ÿå°‘å¤šäº†ã€‚ç„¶è€Œï¼Œâ€œæ¦‚å¿µâ€è¿˜æ˜¯æ²¡æœ‰è¿›å…¥ C++17ï¼Œä¸»è¦ç”±äºä¸‹é¢è¿™äº›åŸå› ï¼š</p><ul><li>ä» Concepts TS å‡ºç‰ˆåˆ°æ ‡å‡†å®šç¨¿åªæœ‰ä¸åˆ°å››ä¸ªâ½‰çš„æ—¶é—´ï¼ˆC++20 çš„å†…å®¹ä¹ŸåŒæ ·æ˜¯åœ¨ 2019 å¹´å°±å…¨éƒ¨å†»ç»“äº†ï¼Œåˆ°æ­£å¼å‡ºç‰ˆå‰çš„æ—¶é—´ç•™ä¸ªä¿®æ­£å°é—®é¢˜å’Œèµ°æ‰¹å‡†æµç¨‹ï¼‰</li><li>â€œæ¦‚å¿µâ€åªæœ‰ä¸€ä¸ªå®ç°ï¼ˆGCCï¼‰</li><li>Concepts TS è§„æ ¼ä¹¦çš„ä½œè€…å’Œ GCC ä¸­çš„æ¦‚å¿µå®ç°è€…æ˜¯åŒâ¼€ä¸ªâ¼ˆï¼Œæ²¡æœ‰â¼ˆç‹¬â½´åœ°ä»è§„æ ¼ä¹¦å‡ºå‘å®ç°æ¦‚å¿µ</li><li>Concepts TS â¾¥æ²¡æœ‰å®é™…å®šä¹‰æ¦‚å¿µï¼Œæ ‡å‡†åº“ä¹Ÿæ²¡æœ‰æŠŠæ¦‚å¿µç”¨èµ·æ¥</li></ul><p>å½“ç„¶ï¼Œå¤§å®¶è¿˜æ˜¯è®¤å¯â€œæ¦‚å¿µâ€æ˜¯ä¸ªå¥½åŠŸèƒ½ï¼Œåˆ°äº† 2017 å¹´ 7 æœˆï¼Œâ€œæ¦‚å¿µâ€å°±æ­£å¼å¹¶å…¥ C++20 è‰æ¡ˆäº†ã€‚ä¹‹åï¼Œå°ä¿®è®¢è¿˜æ˜¯ä¸å°‘çš„ï¼ˆæ‰€ä»¥â€œæ¦‚å¿µâ€æ²¡æœ‰è¿›å…¥ C++20 ä¹Ÿä¸å®Œå…¨æ˜¯ä»¶åäº‹ï¼‰ã€‚ä»ç”¨æˆ·çš„è§’åº¦ï¼Œæœ€å¤§çš„ä¸€ä¸ªæ”¹å˜æ˜¯â€œæ¦‚å¿µâ€çš„åå­—ï¼šç›®å‰ï¼Œæ‰€æœ‰æ ‡å‡†â€œæ¦‚å¿µâ€ä»å…¨éƒ¨ç”±å¤§å†™å­—æ¯æ‰“å¤´æ”¹æˆäº†â€œæ ‡å‡†å¤§å°å†™â€â€”â€”å³å…¨éƒ¨å°å†™å­—æ¯åŠ ä¸‹åˆ’çº¿ [4]ã€‚æ¯”å¦‚ï¼Œå…è®¸ç›¸ç­‰æ¯”è¾ƒè¿™ä¸ªæ¦‚å¿µï¼ŒåŸå…ˆå†™ä½œ <code>EqualityComparable</code>ï¼Œç°åœ¨è¦å†™æˆ <code>equality_comparable</code>ã€‚</p><h2 id="åŸºæœ¬çš„-concepts" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬çš„-concepts"><span>åŸºæœ¬çš„ Concepts</span></a></h2><p>ä¸‹å›¾ä¸­ç»™å‡ºäº† C++ é‡Œå¯¹è±¡ç›¸å…³çš„éƒ¨åˆ†æ ‡å‡†æ¦‚å¿µï¼ˆä¸å®Œæ•´ï¼‰ï¼š</p><img src="https://static001.geekbang.org/resource/image/fc/21/fc99fa3b010ab1e84741eea004933f21.png" alt=""><p>æˆ‘ä»¬ä»ä¸‹å¾€ä¸Šå¿«é€Ÿçœ‹ä¸€ä¸‹ï¼š</p><ul><li><code>move_constructible</code>ï¼šå¯ç§»åŠ¨æ„é€ </li><li><code>swappable</code>ï¼šå¯äº¤æ¢</li><li><code>movable</code>ï¼šå¯ç§»åŠ¨æ„é€ ã€å¯äº¤æ¢ï¼Œåˆåœ¨ä¸€èµ·å°±æ˜¯å¯ç§»åŠ¨äº†</li><li><code>copy_constructible</code>ï¼šå¯æ‹·è´æ„é€ </li><li><code>copyable</code>ï¼šå¯æ‹·è´æ„é€ ã€å¯ç§»åŠ¨ï¼Œåˆåœ¨ä¸€èµ·å°±æ˜¯å¯å¤åˆ¶äº†ï¼ˆæ³¨ï¼šè¿™å„¿â€œæ‹·è´â€å’Œâ€œå¤åˆ¶â€åªæ˜¯æˆ‘åœ¨ç¿»è¯‘ä¸­åšçš„ä¸€ç‚¹å°åŒºåˆ†ï¼Œè‹±æ–‡ä¸­æ²¡æœ‰åŒºåˆ«ï¼‰</li><li><code>default_initializable</code>ï¼šå¯é»˜è®¤åˆå§‹åŒ–ï¼ˆåå­—ä¸å« <code>default_constructible</code> æ˜¯å› ä¸ºç›®å‰çš„ type traits ä¸­æœ‰ <code>is_default_constructible</code>ï¼Œä¸”æ„ä¹‰å’Œ <code>default_initializable</code> æœ‰ç‚¹å¾®å¦™çš„åŒºåˆ«ï¼›è¯¦è§<a href="https://timsong-cpp.github.io/lwg-issues/3338" target="_blank" rel="noopener noreferrer">é—®é¢˜æŠ¥å‘Š 3338</a>ï¼‰</li><li><code>semiregular</code>ï¼šå¯å¤åˆ¶ã€å¯é»˜è®¤åˆå§‹åŒ–ï¼Œåˆåœ¨ä¸€èµ·å°±æ˜¯åŠæ­£åˆ™äº†</li><li><code>equality_comparable</code>ï¼šå¯ç›¸ç­‰æ¯”è¾ƒï¼Œå³å¯¹è±¡ä¹‹é—´å¯ä»¥ä½¿ç”¨ <code>==</code> è¿ç®—ç¬¦</li><li><code>regular</code>ï¼šåŠæ­£åˆ™ã€å¯ç›¸ç­‰æ¯”è¾ƒï¼Œåˆåœ¨ä¸€èµ·å°±æ˜¯æ­£åˆ™äº†</li></ul><p>è¿™äº›â€œæ¦‚å¿µâ€ç°åœ¨ä¸åªæ˜¯æ–‡å­—æè¿°ï¼Œç»å¤§éƒ¨åˆ†æ˜¯å¯ä»¥çœŸæ­£åœ¨ä»£ç ä¸­å®šä¹‰çš„ã€‚ç°åœ¨ï¼Œå‡†æ ‡å‡†çš„å®šä¹‰å·²ç»å¯ä»¥åœ¨ <a href="http://cppreference.com" target="_blank" rel="noopener noreferrer">cppreference.com</a> ä¸Šæ‰¾åˆ° [5]ã€‚ä»å®é™…çš„è§’åº¦ï¼Œä¸‹é¢æˆ‘ä»¬åˆ—ä¸¾éƒ¨åˆ†æ¦‚å¿µåœ¨ CMCSTL2 [6]â€”â€”ä¸€ä¸ª Rangesï¼ˆæˆ‘ä»¬ä¸‹ä¸€è®²è®¨è®ºï¼‰çš„å‚è€ƒå®ç°â€”â€”ä¸­çš„å®šä¹‰ã€‚</p><p>ä»ç®€å•æ€§çš„è§’åº¦ï¼Œæˆ‘ä»¬è‡ªä¸Šå¾€ä¸‹çœ‹ï¼Œé¦–å…ˆæ˜¯ <code>regular</code>ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>template &amp;lt;class T&amp;gt;</span></span>
<span class="line"><span>concept regular =</span></span>
<span class="line"><span>  semiregular&amp;lt;T&amp;gt; &amp;amp;&amp;amp;</span></span>
<span class="line"><span>  equality_comparable&amp;lt;T&amp;gt;;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¾ˆç®€å•å§ï¼Œå®šä¹‰ä¸€ä¸ª concept æ­¤å¤„åªæ˜¯ä¸€äº›é’ˆå¯¹ç±»å‹çš„æ¡ä»¶è€Œå·²ã€‚å¯ä»¥çœ‹å‡ºï¼Œæ¯ä¸ªæ¦‚å¿µæµ‹è¯•è¡¨è¾¾å¼ï¼ˆå¦‚ <code>semiregular&amp;lt;T&amp;gt;</code>ï¼‰çš„ç»“æœæ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼ˆç¼–è¯‘æœŸå¸¸é‡ï¼‰ã€‚</p><p>ç„¶åæ˜¯ <code>semiregular</code>ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>template &amp;lt;class T&amp;gt;</span></span>
<span class="line"><span>concept semiregular =</span></span>
<span class="line"><span>  copyable&amp;lt;T&amp;gt; &amp;amp;&amp;amp;</span></span>
<span class="line"><span>  default_initializable&amp;lt;T&amp;gt;;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å†çœ‹ä¸€çœ¼ <code>equality_comparable</code>ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>template &amp;lt;class T, class U&amp;gt;</span></span>
<span class="line"><span>concept WeaklyEqualityComparable =</span></span>
<span class="line"><span>  requires(</span></span>
<span class="line"><span>      const remove_reference_t&amp;lt;T&amp;gt;&amp;amp; t,</span></span>
<span class="line"><span>      const remove_reference_t&amp;lt;U&amp;gt;&amp;amp; u) {</span></span>
<span class="line"><span>    { t == u } -&amp;gt; boolean;</span></span>
<span class="line"><span>    { t != u } -&amp;gt; boolean;</span></span>
<span class="line"><span>    { u == t } -&amp;gt; boolean;</span></span>
<span class="line"><span>    { u != t } -&amp;gt; boolean;</span></span>
<span class="line"><span>  };</span></span>
<span class="line"><span></span></span>
<span class="line"><span>template &amp;lt;class T&amp;gt;</span></span>
<span class="line"><span>concept equality_comparable =</span></span>
<span class="line"><span>  WeaklyEqualityComparable&amp;lt;T, T&amp;gt;;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªç¨å¤æ‚ç‚¹ï¼Œç”¨åˆ°äº† <code>requires</code> [7]ï¼Œä½†ä¸éœ€è¦æˆ‘è®²è§£ï¼Œä½ ä¹Ÿèƒ½çœ‹å‡ºæ¥ <code>equality_comparable</code> çš„è¦æ±‚å°±æ˜¯ç±»å‹çš„å¸¸å·¦å€¼å¼•ç”¨ä¹‹é—´å…è®¸è¿›è¡Œ <code>==</code> å’Œ <code>!=</code> çš„æ¯”è¾ƒï¼Œä¸”è¿”å›ç±»å‹ä¸ºå¸ƒå°”ç±»å‹å§ã€‚</p><p>æ³¨æ„ä¸Šé¢çš„å®šä¹‰é‡Œå†™çš„æ˜¯ <code>boolean</code> è€Œä¸æ˜¯ <code>bool</code>ã€‚è¿™ä¸ªæ¦‚å¿µå®šä¹‰ä¸è¦æ±‚æ¯”è¾ƒè¿ç®—ç¬¦çš„ç»“æœç±»å‹æ˜¯ <code>bool</code>ï¼Œè€Œæ˜¯å¯ä»¥ç”¨åœ¨éœ€è¦å¸ƒå°”å€¼çš„ä¸Šä¸‹æ–‡ä¸­ã€‚è‡ªç„¶ï¼Œ<code>boolean</code> ä¹Ÿæ˜¯æœ‰å®šä¹‰çš„ï¼Œä½†è¿™ä¸ªå®šä¹‰å¯èƒ½æ¯”ä½ æƒ³è±¡çš„å¤æ‚ï¼Œæˆ‘è¿™å„¿å°±ä¸å†™å‡ºæ¥äº†ğŸ˜œã€‚</p><p>æˆ‘ä»¬ä¹‹å‰å·²ç»è®²è¿‡äº†å„ç§è¿­ä»£å™¨ï¼Œæ¯ä¸ªè¿­ä»£å™¨ä¹Ÿè‡ªç„¶åœ°æ»¡è¶³ä¸€ä¸ªâ€œæ¦‚å¿µâ€â€”â€”æ¦‚å¿µåç§°åŸºæœ¬ä¸Šå°±æ˜¯ä¹‹å‰ç»™çš„ï¼Œåªæ˜¯å¤§å°å†™è¦å˜åŒ–ä¸€ä¸‹è€Œå·²ã€‚æœ€åº•ä¸‹çš„ <code>iterator</code> æ˜¯ä¸ªä¾‹å¤–ï¼šå› ä¸ºè¿™ä¸ªåå­—åœ¨æ ‡å‡†é‡Œå·²ç»è¢«å ç”¨å•¦ã€‚æ‰€ä»¥ç°åœ¨å®ƒçš„åå­—æ˜¯ <code>input_or_output_iterator</code>ã€‚</p><p>è¿­ä»£å™¨æœ¬èº«éœ€è¦æ»¡è¶³å“ªäº›æ¦‚å¿µå‘¢ï¼Ÿæˆ‘ä»¬çœ‹ä¸‹å›¾ï¼š</p><img src="https://static001.geekbang.org/resource/image/6a/0c/6ade3581f8f2da22c92987e81974210c.png" alt=""><p>æ³¨æ„è¿™å¼ è·Ÿä¸Šé¢é‚£å¼ å›¾ä¸ä¸€æ ·ï¼Œæ¦‚å¿µä¹‹é—´ä¸æ˜¯ç®€å•çš„â€œåˆå–â€å…³ç³»ï¼Œè€Œæ˜¯ä¸€ç§â€œç»§æ‰¿â€å…³ç³»ï¼šä¸Šé¢çš„æ¦‚å¿µæ¯”å®ƒæŒ‡å‘çš„ä¸‹é¢çš„æ¦‚å¿µæœ‰æ›´å¤šçš„è¦æ±‚ã€‚å…·ä½“åˆ°ä»£ç ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>template &amp;lt;class I&amp;gt;</span></span>
<span class="line"><span>concept weakly_incrementable =</span></span>
<span class="line"><span>  semiregular&amp;lt;I&amp;gt; &amp;amp;&amp;amp; requires(I i) {</span></span>
<span class="line"><span>    typename iter_difference_t&amp;lt;I&amp;gt;;</span></span>
<span class="line"><span>    requires signed_integral&amp;lt;</span></span>
<span class="line"><span>      iter_difference_t&amp;lt;I&amp;gt;&amp;gt;;</span></span>
<span class="line"><span>    { ++i } -&amp;gt; same_as&amp;lt;I&amp;amp;&amp;gt;;</span></span>
<span class="line"><span>    i++;</span></span>
<span class="line"><span>  };</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>weakly_incrementable</code> æ˜¯ <code>semiregular</code> å†åŠ ä¸€äº›é¢å¤–çš„è¦æ±‚ï¼š</p><ul><li><code>iter_difference_t&amp;lt;I&amp;gt;</code> æ˜¯ä¸€ä¸ªç±»å‹</li><li><code>iter_difference_t&amp;lt;I&amp;gt;</code> æ˜¯ä¸€ä¸ªæœ‰ç¬¦å·çš„æ•´æ•°ç±»å‹</li><li><code>++i</code> çš„ç»“æœè·Ÿ <code>I&amp;amp;</code> æ˜¯å®Œå…¨ç›¸åŒçš„ç±»å‹</li><li>èƒ½å¤Ÿæ‰§è¡Œ <code>i++</code> æ“ä½œï¼ˆä¸æ£€æŸ¥ç»“æœçš„ç±»å‹ï¼‰</li></ul><p><code>input_or_output_iterator</code> ä¹Ÿå¾ˆç®€å•ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>template &amp;lt;class I&amp;gt;</span></span>
<span class="line"><span>concept input_or_output_iterator =</span></span>
<span class="line"><span>  __dereferenceable&amp;lt;I&amp;amp;&amp;gt; &amp;amp;&amp;amp;</span></span>
<span class="line"><span>  weakly_incrementable&amp;lt;I&amp;gt;;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å°±æ˜¯è¦æ±‚å¯ä»¥è§£å¼•ç”¨ã€å¯ä»¥æ‰§è¡Œ <code>++</code>ã€å¯ä»¥ä½¿ç”¨ <code>iter_difference_t</code> æå–è¿­ä»£å™¨çš„ <code>difference_type</code> è€Œå·²ã€‚</p><p>å‰©ä¸‹çš„æ¦‚å¿µçš„å®šä¹‰ä¹Ÿä¸å¤æ‚ï¼Œæˆ‘è¿™å„¿å°±ä¸ä¸€ä¸€è®²è§£äº†ã€‚æ„Ÿå…´è¶£çš„è¯ä½ å¯ä»¥è‡ªå·±å»çœ‹ CMCSTL2 çš„æºä»£ç ã€‚</p><h3 id="ç®€å•çš„æ¦‚å¿µæµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#ç®€å•çš„æ¦‚å¿µæµ‹è¯•"><span>ç®€å•çš„æ¦‚å¿µæµ‹è¯•</span></a></h3><p>ä¸ºäº†è®©ä½ å†ç®€å•æ„Ÿå—ä¸€ä¸‹æ ‡å‡†çš„æ¦‚å¿µï¼Œæˆ‘å†™äº†ä¸‹é¢è¿™ä¸ªç®€å•çš„æµ‹è¯•ç¨‹åºï¼Œå±•ç¤ºä¸€äº›æ ‡å‡†æ¦‚å¿µçš„æµ‹è¯•ç»“æœï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>#include &amp;lt;armadillo&amp;gt;</span></span>
<span class="line"><span>#include &amp;lt;iostream&amp;gt;</span></span>
<span class="line"><span>#include &amp;lt;memory&amp;gt;</span></span>
<span class="line"><span>#include &amp;lt;type_traits&amp;gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>using namespace std;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#if defined(__cpp_concepts)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#if __cpp_concepts &amp;lt; 201811</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#include &amp;lt;experimental/ranges/concepts&amp;gt;</span></span>
<span class="line"><span>using namespace experimental::ranges;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#else</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#include &amp;lt;concepts&amp;gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#endif</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#else // defined(__cpp_concepts)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#error &quot;No support for concepts!&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#endif</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#define TEST_CONCEPT(Concept,      \\</span></span>
<span class="line"><span>                     Type)         \\</span></span>
<span class="line"><span>  cout &amp;lt;&amp;lt; #Concept &amp;lt;&amp;lt; &#39;&amp;lt;&#39; &amp;lt;&amp;lt; #Type \\</span></span>
<span class="line"><span>       &amp;lt;&amp;lt; &quot;&amp;gt;: &quot;                    \\</span></span>
<span class="line"><span>       &amp;lt;&amp;lt; Concept&amp;lt;Type&amp;gt; &amp;lt;&amp;lt; endl</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#define TEST_CONCEPT2(             \\</span></span>
<span class="line"><span>  Concept, Type1, Type2)           \\</span></span>
<span class="line"><span>  cout &amp;lt;&amp;lt; #Concept &amp;lt;&amp;lt; &#39;&amp;lt;&#39;          \\</span></span>
<span class="line"><span>       &amp;lt;&amp;lt; #Type1 &amp;lt;&amp;lt; &quot;, &quot; &amp;lt;&amp;lt; #Type2 \\</span></span>
<span class="line"><span>       &amp;lt;&amp;lt; &quot;&amp;gt;: &quot;                    \\</span></span>
<span class="line"><span>       &amp;lt;&amp;lt; Concept&amp;lt;Type1,           \\</span></span>
<span class="line"><span>                  Type2&amp;gt; &amp;lt;&amp;lt; endl</span></span>
<span class="line"><span></span></span>
<span class="line"><span>int main()</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  cout &amp;lt;&amp;lt; boolalpha;</span></span>
<span class="line"><span>  cout &amp;lt;&amp;lt; &quot;__cpp_concepts is &quot;</span></span>
<span class="line"><span>       &amp;lt;&amp;lt; __cpp_concepts &amp;lt;&amp;lt; endl;</span></span>
<span class="line"><span>  TEST_CONCEPT(regular, int);</span></span>
<span class="line"><span>  TEST_CONCEPT(regular, char);</span></span>
<span class="line"><span>  TEST_CONCEPT(integral, int);</span></span>
<span class="line"><span>  TEST_CONCEPT(integral, char);</span></span>
<span class="line"><span>  TEST_CONCEPT(readable, int);</span></span>
<span class="line"><span>  TEST_CONCEPT(readable,</span></span>
<span class="line"><span>               unique_ptr&amp;lt;int&amp;gt;);</span></span>
<span class="line"><span>  TEST_CONCEPT2(</span></span>
<span class="line"><span>    writable, unique_ptr&amp;lt;int&amp;gt;, int);</span></span>
<span class="line"><span>  TEST_CONCEPT2(writable,</span></span>
<span class="line"><span>                unique_ptr&amp;lt;int&amp;gt;,</span></span>
<span class="line"><span>                double);</span></span>
<span class="line"><span>  TEST_CONCEPT2(writable,</span></span>
<span class="line"><span>                unique_ptr&amp;lt;int&amp;gt;,</span></span>
<span class="line"><span>                int*);</span></span>
<span class="line"><span>  TEST_CONCEPT(semiregular,</span></span>
<span class="line"><span>               unique_ptr&amp;lt;int&amp;gt;);</span></span>
<span class="line"><span>  TEST_CONCEPT(semiregular,</span></span>
<span class="line"><span>               shared_ptr&amp;lt;int&amp;gt;);</span></span>
<span class="line"><span>  TEST_CONCEPT(equality_comparable,</span></span>
<span class="line"><span>               unique_ptr&amp;lt;int&amp;gt;);</span></span>
<span class="line"><span>  TEST_CONCEPT(semiregular,</span></span>
<span class="line"><span>               arma::imat);</span></span>
<span class="line"><span>  TEST_CONCEPT2(assignable_from,</span></span>
<span class="line"><span>                arma::imat&amp;amp;,</span></span>
<span class="line"><span>                arma::imat&amp;amp;);</span></span>
<span class="line"><span>  TEST_CONCEPT(semiregular,</span></span>
<span class="line"><span>               arma::imat22);</span></span>
<span class="line"><span>  TEST_CONCEPT2(assignable_from,</span></span>
<span class="line"><span>                arma::imat22&amp;amp;,</span></span>
<span class="line"><span>                arma::imat22&amp;amp;);</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»£ç ç…§é¡¾äº†ä¸¤ç§å¯èƒ½çš„ç¯å¢ƒï¼š</p><ul><li>æœ€æ–°çš„ MSVCï¼ˆéœ€è¦ä½¿ç”¨ <code>/std:c++latest</code>ï¼›æˆ‘ç”¨çš„æ˜¯ Visual Studio 2019 16.4.4ï¼‰</li><li>GCCï¼ˆéœ€è¦ä½¿ç”¨ <code>-fconcepts</code>ï¼›æˆ‘æµ‹è¯•äº† 7ã€8ã€9 ä¸‰ä¸ªç‰ˆæœ¬éƒ½å¯ä»¥ï¼‰å’Œ CMCSTL2ï¼ˆéœ€è¦å°†å…¶ include ç›®å½•ç”¨ <code>-I</code> é€‰é¡¹åŠ åˆ°å‘½ä»¤è¡Œä¸Šï¼‰</li></ul><p>ç¨‹åºåœ¨ MSVC ä¸‹çš„ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><blockquote></blockquote><p>\`__cpp_concepts is 201811\`<br> \`regular&lt;int&gt;: true\`<br> \`regular&lt;char&gt;: true\`<br> \`integral&lt;int&gt;: true\`<br> \`integral&lt;char&gt;: true\`<br> \`readable&lt;int&gt;: false\`<br> \`readable&lt;unique_ptr&lt;int&gt;&gt;: true\`<br> \`writable&lt;unique_ptr&lt;int&gt;, int&gt;: true\`<br> \`writable&lt;unique_ptr&lt;int&gt;, double&gt;: true\`<br> \`writable&lt;unique_ptr&lt;int&gt;, int*&gt;: false\`<br> \`semiregular&lt;unique_ptr&lt;int&gt;&gt;: false\`<br> \`semiregular&lt;shared_ptr&lt;int&gt;&gt;: true\`<br> \`equality_comparable&lt;unique_ptr&lt;int&gt;&gt;: true\`<br> \`semiregular&lt;arma::imat&gt;: true\`<br> \`assignable_from&lt;arma::imat&amp;, arma::imat&amp;&gt;: true\`<br> \`semiregular&lt;arma::imat22&gt;: false\`<br> \`assignable_from&lt;arma::imat22&amp;, arma::imat22&amp;&gt;: false\`</p><p>é™¤äº†ç¬¬ä¸€è¡Œ <code>__cpp_concepts</code> çš„è¾“å‡ºï¼ŒGCC çš„ç»“æœä¹Ÿæ˜¯å®Œå…¨ä¸€è‡´çš„ã€‚å¤§éƒ¨åˆ†çš„ç»“æœåº”å½“æ²¡æœ‰æ„å¤–ï¼Œä½†ä¹Ÿéœ€è¦æ³¨æ„ï¼ŒæŸäº›ç”¨èµ·æ¥æ²¡é—®é¢˜çš„ç±»ï¼ˆå¦‚ <code>arma::imat22</code>ï¼‰ï¼Œå´å› ä¸ºä¸€äº›å®ç°ä¸Šçš„ç‰¹æ®ŠæŠ€æœ¯ï¼Œä¸èƒ½æ»¡è¶³ <code>semiregular</code>ã€‚â€”â€”æ¦‚å¿µè¦æ¯”é¸­å­ç±»å‹æ›´ä¸ºä¸¥æ ¼ã€‚</p><h2 id="æ¦‚å¿µã€å‡ºé”™ä¿¡æ¯å’Œ-sfinae" tabindex="-1"><a class="header-anchor" href="#æ¦‚å¿µã€å‡ºé”™ä¿¡æ¯å’Œ-sfinae"><span>æ¦‚å¿µã€å‡ºé”™ä¿¡æ¯å’Œ SFINAE</span></a></h2><p>æ˜¾ç„¶ï¼Œå¯¹äºä¸Šé¢å‡ºç°çš„è¿™ä¸ªä¾‹å­ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>template &amp;lt;Integer N&amp;gt;</span></span>
<span class="line"><span>N half(N n)</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  return n / 2;</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬ç”¨ <code>enable_if</code> ä¹Ÿæ˜¯èƒ½å†™å‡ºæ¥çš„ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>template &amp;lt;typename N&amp;gt;</span></span>
<span class="line"><span>enable_if_t&amp;lt;Integer&amp;lt;N&amp;gt;, N&amp;gt;</span></span>
<span class="line"><span>half(N n)</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  return n / 2;</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸è¿‡ï¼Œä½ ä¸ä¼šè§‰å¾—è¿™ç§æ–¹å¼æ›´å¥½å§ï¼Ÿè€Œä¸”ï¼Œå¯¹äºæ²¡æœ‰è¿”å›å€¼çš„æƒ…å†µï¼Œè¦ç”¨å¯¹ <code>enable_if</code> è¿˜æ˜¯éå¸¸éº»çƒ¦çš„ï¼ˆå‚è§ [8] é‡Œçš„ Notes /æ³¨è§£éƒ¨åˆ†ï¼‰ã€‚</p><p>æ›´é‡è¦çš„æ˜¯ï¼Œâ€œæ¦‚å¿µâ€å¯ä»¥æä¾›æ›´ä¸ºå‹å¥½å¯è¯»çš„ä»£ç ï¼Œä»¥åŠæ½œåœ¨æ›´ä¸ºå‹å¥½çš„å‡ºé”™ä¿¡æ¯ã€‚æ‹¿ Andrew Sutton çš„ä¸€ä¸ªä¾‹å­ [9]ï¼ˆæ ¹æ®æˆ‘ä»¬ä¸ŠèŠ‚è¯´çš„ç¼–è¯‘ç¯å¢ƒåšäº†æ”¹ç¼–ï¼‰ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>#include &amp;lt;string&amp;gt;</span></span>
<span class="line"><span>#include &amp;lt;vector&amp;gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>using namespace std;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#if defined(__cpp_concepts)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#if __cpp_concepts &amp;lt; 201811</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#include &amp;lt;experimental/ranges/concepts&amp;gt;</span></span>
<span class="line"><span>using namespace experimental::ranges;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#else</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#include &amp;lt;concepts&amp;gt;</span></span>
<span class="line"><span>#include &amp;lt;ranges&amp;gt;</span></span>
<span class="line"><span>using namespace ranges;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#endif</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#define REQUIRES(x) requires x</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#else // defined(__cpp_concepts)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#define REQUIRES(x)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#endif</span></span>
<span class="line"><span></span></span>
<span class="line"><span>template &amp;lt;typename R, typename T&amp;gt;</span></span>
<span class="line"><span>  REQUIRES(</span></span>
<span class="line"><span>    (range&amp;lt;R&amp;gt; &amp;amp;&amp;amp;</span></span>
<span class="line"><span>     equality_comparable_with&amp;lt;</span></span>
<span class="line"><span>       T, typename R::value_type&amp;gt;))</span></span>
<span class="line"><span>bool in(R const&amp;amp; r, T const&amp;amp; value)</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  for (auto const&amp;amp; x : r)</span></span>
<span class="line"><span>    if (x == value)</span></span>
<span class="line"><span>      return true;</span></span>
<span class="line"><span>  return false;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>int main()</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  vector&amp;lt;string&amp;gt; v{&quot;Hello&quot;,</span></span>
<span class="line"><span>                   &quot;World&quot;};</span></span>
<span class="line"><span>  in(v, &quot;Hello&quot;);</span></span>
<span class="line"><span>  in(v, 0);</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»¥ GCC 8 ä¸ºä¾‹ï¼Œå¦‚æœä¸ä½¿ç”¨æ¦‚å¿µçº¦æŸï¼Œ<code>in(v, 0)</code> è¿™è¡Œä¼šäº§ç”Ÿ 166 è¡Œå‡ºé”™ä¿¡æ¯ï¼›è€Œå¯ç”¨äº†æ¦‚å¿µçº¦æŸåï¼Œå‡ºé”™ä¿¡æ¯ç¼©å‡åˆ°äº† 8 è¡Œã€‚MSVC ä¸Šå¯¹äºè¿™ä¸ªä¾‹å­ä¸ä½¿ç”¨æ¦‚å¿µé”™è¯¯ä¿¡æ¯ä¹Ÿè¾ƒçŸ­ï¼Œä½†å¯ç”¨äº†æ¦‚å¿µåä»ç„¶èƒ½äº§ç”Ÿæ›´çŸ­ã€æ›´æ˜ç¡®çš„å‡ºé”™ä¿¡æ¯ï¼š</p><blockquote></blockquote><p>\`test.cpp(47): error C2672: &#39;in&#39;: no matching overloaded function found\`<br> \`test.cpp(47): error C7602: &#39;in&#39;: the associated constraints are not satisfied\`<br> \`test.cpp(34): note: see declaration of &#39;in&#39;\`</p><p>éšç€ç¼–è¯‘å™¨çš„æ”¹è¿›ï¼Œæ¦‚å¿µåœ¨å‡ºé”™ä¿¡æ¯ä¸Šçš„ä¼˜åŠ¿åœ¨æ¶ˆå‡ï¼Œä½†åœ¨ä»£ç è¡¨è¾¾ä¸Šçš„ä¼˜åŠ¿ä»ç„¶æ˜¯å®å®åœ¨åœ¨çš„ã€‚è®°å¾—<a href="https://time.geekbang.org/column/article/181636" target="_blank" rel="noopener noreferrer">[ç¬¬ 14 è®²]</a> é‡Œæˆ‘ä»¬è´¹äº†å¥½å¤§çš„åŠ²ã€ç”¨äº†å‡ ç§ä¸åŒçš„æ–¹æ³•æ¥å®šä¹‰ <code>has_reserve</code> å—ï¼Ÿåœ¨æ¦‚å¿µé¢å‰ï¼Œé‚£äº›å°±æˆäº†â€œå›â€å­—æœ‰å‡ ç§å†™æ³•äº†ã€‚æˆ‘ä»¬å¯ä»¥é£å¿«åœ°å®šä¹‰ä¸‹é¢çš„æ¦‚å¿µï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>template &amp;lt;typename T&amp;gt;</span></span>
<span class="line"><span>concept has_reserve =</span></span>
<span class="line"><span>  requires(T&amp;amp; dest) {</span></span>
<span class="line"><span>    dest.reserve(1U);</span></span>
<span class="line"><span>  };</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªæ¦‚å¿µç”¨åœ¨ç¼–è¯‘æœŸæ¡ä»¶è¯­å¥é‡Œï¼Œæ•ˆæœå’Œä¹‹å‰çš„å®Œå…¨ç›¸åŒâ€¦â€¦å“¦ï¼Œé”™äº†ï¼Œä¸ç”¨å†å†™ <code>::value</code> æˆ– <code>{}</code> äº†ğŸ˜‚ã€‚</p><p>åœ¨<a href="https://time.geekbang.org/column/article/181608" target="_blank" rel="noopener noreferrer">[ç¬¬ 13 è®²]</a> æˆ‘ç»™å‡ºè¿‡çš„ <code>fmap</code>ï¼Œåœ¨å®é™…ä»£ç ä¸­æˆ‘ä¹Ÿæ˜¯ç”¨äº† SFINAE æ¥è¿›è¡Œçº¦æŸçš„ï¼ˆç•¥ç®€åŒ–ï¼‰ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>template &amp;lt;</span></span>
<span class="line"><span>  template &amp;lt;typename, typename&amp;gt;</span></span>
<span class="line"><span>  class OutContainer = vector,</span></span>
<span class="line"><span>  typename F, class R&amp;gt;</span></span>
<span class="line"><span>auto fmap(F&amp;amp;&amp;amp; f, R&amp;amp;&amp;amp; inputs)</span></span>
<span class="line"><span>  -&amp;gt; decltype(</span></span>
<span class="line"><span>    begin(inputs),</span></span>
<span class="line"><span>    end(inputs),</span></span>
<span class="line"><span>    OutContainer&amp;lt;decay_t&amp;lt;</span></span>
<span class="line"><span>      decltype(f(*begin(</span></span>
<span class="line"><span>        inputs)))&amp;gt;&amp;gt;());</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘è´¹äº†è€å¤§çš„åŠ²ï¼Œè¦æŠŠè¿”å›å€¼å†™å‡ºæ¥ï¼Œå®é™…ä¸Šå°±æ˜¯ä¸ºäº†åˆ©ç”¨ SFINAE è€Œå·²ã€‚å¦‚æœä½¿ç”¨â€œæ¦‚å¿µâ€ï¼Œé‚£ä»£ç å¯ä»¥ç®€åŒ–æˆï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>template &amp;lt;</span></span>
<span class="line"><span>  template &amp;lt;typename, typename&amp;gt;</span></span>
<span class="line"><span>  class OutContainer = vector,</span></span>
<span class="line"><span>  typename F, class R&amp;gt;</span></span>
<span class="line"><span>  requires requires(R&amp;amp;&amp;amp; r) {</span></span>
<span class="line"><span>    begin(r);</span></span>
<span class="line"><span>    end(r);</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>auto fmap(F&amp;amp;&amp;amp; f, R&amp;amp;&amp;amp; inputs);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢çš„ <code>requires requires</code> ä¸æ˜¯é”™è¯¯ï¼Œæ­£å¦‚ <code>noexcept(noexcept(â€¦))</code> ä¸æ˜¯é”™è¯¯ä¸€æ ·ã€‚ç¬¬ä¸€ä¸ª <code>requires</code> å¼€å§‹ä¸€ä¸ª <strong>requires å­å¥</strong>ï¼Œåé¢è·Ÿä¸€ä¸ªå¸¸é‡è¡¨è¾¾å¼ï¼Œç»“æœçš„çœŸå‡è¡¨ç¤ºæ˜¯å¦æ»¡è¶³äº†æ¨¡æ¿çš„çº¦æŸæ¡ä»¶ã€‚ç¬¬äºŒä¸ª <code>requires</code> åˆ™å¼€å§‹äº†ä¸€ä¸ª <strong>requires è¡¨è¾¾å¼</strong>ï¼šå¦‚æœç±»å‹ <code>R</code> æ»¡è¶³çº¦æŸâ€”â€”å¯ä»¥ä½¿ç”¨ <code>begin</code> å’Œ <code>end</code> å¯¹ <code>R&amp;amp;&amp;amp;</code> ç±»å‹çš„å˜é‡è¿›è¡Œè°ƒç”¨â€”â€”åˆ™è¿”å›çœŸï¼Œå¦åˆ™è¿”å›å‡ã€‚</p><p>ä¸è¿‡ï¼Œåœ¨ C++20 é‡Œï¼Œä¸Šé¢è¿™ä¸ªæ¡ä»¶æˆ‘æ˜¯ä¸éœ€è¦è¿™ä¹ˆå†™å‡ºæ¥çš„ã€‚æœ‰ä¸€ä¸ªç°æˆçš„æ¦‚å¿µå¯ç”¨ï¼Œè¿™ä¹ˆå†™å°±è¡Œäº†ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>template &amp;lt;</span></span>
<span class="line"><span>  template &amp;lt;typename, typename&amp;gt;</span></span>
<span class="line"><span>  class OutContainer = vector,</span></span>
<span class="line"><span>  typename F, class R&amp;gt;</span></span>
<span class="line"><span>  requires range&amp;lt;R&amp;gt;</span></span>
<span class="line"><span>auto fmap(F&amp;amp;&amp;amp; f, R&amp;amp;&amp;amp; inputs);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚ä½ æ‰€è§ï¼Œæˆ‘ä»Šå¤©ç¬¬äºŒæ¬¡ç”¨äº† <code>range</code> è¿™ä¸ªæ¦‚å¿µã€‚ç©¶ç«Ÿä»€ä¹ˆæ˜¯ rangeï¼Ÿæˆ‘ä»¬ç•™åˆ°ä¸‹ä¸€è®²å†è¯´ã€‚</p><h2 id="å†…å®¹å°ç»“" tabindex="-1"><a class="header-anchor" href="#å†…å®¹å°ç»“"><span>å†…å®¹å°ç»“</span></a></h2><p>ä»Šå¤©æˆ‘ä»¬è®¨è®ºäº† C++20 é‡Œå¯ä»¥è¯´æ˜¯æœ€é‡è¦çš„æ–°åŠŸèƒ½â€”â€”æ¦‚å¿µã€‚æ¦‚å¿µå¯ä»¥ç”¨æ¥å¯¹æ¨¡æ¿å‚æ•°è¿›è¡Œçº¦æŸï¼Œèƒ½å–ä»£ SFINAEï¼Œäº§ç”Ÿæ›´å¥½ã€æ›´å¯è¯»çš„ä»£ç ã€‚</p><p>æ³¨æ„æœ¬è®²çš„å†…å®¹å¹¶éä¸€ä¸ªå½¢å¼åŒ–çš„æè¿°ï¼Œè¯·ä½ åœ¨é˜…è¯»äº†æœ¬è®²çš„å†…å®¹ä¹‹åï¼Œå†å¯¹ç…§å‚è€ƒèµ„æ–™ [6] çš„å†…å®¹çœ‹ä¸€ä¸‹æ›´ä¸¥æ ¼çš„æè¿°ï¼Œç„¶åå†å›è¿‡å¤´æ¥è¯»ä¸€ä¸‹ä¾‹å­ï¼Œæ¥åŠ æ·±ä½ å¯¹æœ¬è®²å†…å®¹çš„ç†è§£ã€‚</p><h2 id="è¯¾åæ€è€ƒ" tabindex="-1"><a class="header-anchor" href="#è¯¾åæ€è€ƒ"><span>è¯¾åæ€è€ƒ</span></a></h2><p>è¯·ç»“åˆè‡ªå·±çš„ C++ é¡¹ç›®ï¼Œè€ƒè™‘ä¸€ä¸‹ï¼Œâ€œæ¦‚å¿µâ€å¯ä»¥ä¸ºå¼€å‘å…·ä½“å¸¦æ¥å“ªäº›å¥½å¤„ï¼Ÿåè¿‡æ¥ï¼Œè´Ÿé¢çš„å½±å“åˆå¯èƒ½ä¼šæ˜¯ä»€ä¹ˆï¼Ÿ</p><h2 id="å‚è€ƒèµ„æ–™" tabindex="-1"><a class="header-anchor" href="#å‚è€ƒèµ„æ–™"><span>å‚è€ƒèµ„æ–™</span></a></h2><p>[1] Bjarne Stroustrup, â€œConcepts: the future of generic programming, or how to design good concepts and use them wellâ€. <a href="http://www.stroustrup.com/good_concepts.pdf" target="_blank" rel="noopener noreferrer">http://www.stroustrup.com/good_concepts.pdf</a></p><p>[2] Alexander Stepanov and Paul McJones, <strong>Elements of Programming</strong>. Addison-Wesley, 2009. æœ‰ä¸­æ–‡ç‰ˆï¼ˆè£˜å®—ç‡•è¯‘ã€Šç¼–ç¨‹åŸæœ¬ã€‹ï¼Œäººæ°‘é‚®ç”µå‡ºç‰ˆç¤¾ï¼Œ2019 å¹´ï¼‰</p><p>[3] ISO/IEC JTC1 SC22 WG21, N4549, â€œProgramming languages â€” C++ extensions for conceptsâ€. <a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4549.pdf" target="_blank" rel="noopener noreferrer">http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4549.pdf</a></p><p>[4] Herb Sutter et al., â€œRename concepts to standard_case for C++20, while we still canâ€. <a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2019/p1754r1.pdf" target="_blank" rel="noopener noreferrer">http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2019/p1754r1.pdf</a></p><p>[5] <a href="http://cppreference.com" target="_blank" rel="noopener noreferrer">cppreference.com</a>, â€œStandard library header &lt;concepts&gt;â€. <a href="https://en.cppreference.com/w/cpp/header/concepts" target="_blank" rel="noopener noreferrer">https://en.cppreference.com/w/cpp/header/concepts</a>.</p><p>[5a] <a href="http://cppreference.com" target="_blank" rel="noopener noreferrer">cppreference.com</a>, â€œæ ‡å‡†åº“å¤´æ–‡ä»¶ &lt;concepts&gt;â€. <a href="https://zh.cppreference.com/w/cpp/header/concepts" target="_blank" rel="noopener noreferrer">https://zh.cppreference.com/w/cpp/header/concepts</a>.</p><p>[6] Casey Carter et al., cmcstl2. <a href="https://github.com/CaseyCarter/cmcstl2" target="_blank" rel="noopener noreferrer">https://github.com/CaseyCarter/cmcstl2</a></p><p>[7] <a href="http://cppreference.com" target="_blank" rel="noopener noreferrer">cppreference.com</a>, â€œConstraints and conceptsâ€. <a href="https://en.cppreference.com/w/cpp/language/constraints" target="_blank" rel="noopener noreferrer">https://en.cppreference.com/w/cpp/language/constraints</a></p><p>[7a] <a href="http://cppreference.com" target="_blank" rel="noopener noreferrer">cppreference.com</a>, â€œçº¦æŸä¸æ¦‚å¿µâ€. <a href="https://zh.cppreference.com/w/cpp/language/constraints" target="_blank" rel="noopener noreferrer">https://zh.cppreference.com/w/cpp/language/constraints</a></p><p>[8] <a href="http://cppreference.com" target="_blank" rel="noopener noreferrer">cppreference.com</a>, â€œstd::enable_ifâ€. <a href="https://en.cppreference.com/w/cpp/types/enable_if" target="_blank" rel="noopener noreferrer">https://en.cppreference.com/w/cpp/types/enable_if</a></p><p>[8a] <a href="http://cppreference.com" target="_blank" rel="noopener noreferrer">cppreference.com</a>, â€œstd::enable_ifâ€. <a href="https://zh.cppreference.com/w/cpp/types/enable_if" target="_blank" rel="noopener noreferrer">https://zh.cppreference.com/w/cpp/types/enable_if</a></p><p>[9] Andrew Sutton, â€œIntroducing conceptsâ€. <a href="https://accu.org/index.php/journals/2157" target="_blank" rel="noopener noreferrer">https://accu.org/index.php/journals/2157</a></p>`,100)]))}const d=s(i,[["render",l]]),m=JSON.parse('{"path":"/posts/%E7%8E%B0%E4%BB%A3C__%E5%AE%9E%E6%88%9830%E8%AE%B2/%E6%9C%AA%E6%9D%A5%E7%AF%87/28%20_%20Concepts%EF%BC%9A%E5%A6%82%E4%BD%95%E5%AF%B9%E6%A8%A1%E6%9D%BF%E8%BF%9B%E8%A1%8C%E7%BA%A6%E6%9D%9F_.html","title":"28 _ Conceptsï¼šå¦‚ä½•å¯¹æ¨¡æ¿è¿›è¡Œçº¦æŸ_","lang":"zh-CN","frontmatter":{"description":"28 _ Conceptsï¼šå¦‚ä½•å¯¹æ¨¡æ¿è¿›è¡Œçº¦æŸ_ ä½ å¥½ï¼Œæˆ‘æ˜¯å´å’ç‚œã€‚ ä»è¿™ä¸€è®²å¼€å§‹ï¼Œæˆ‘ä»¬è¿›å…¥äº†æœªæ¥ç¯‡ï¼Œå±•æœ›ä¸€ä¸‹å³å°†åœ¨ C++20 å‡ºç°çš„æ–°åŠŸèƒ½ã€‚æˆ‘ä»¬ç¬¬ä¸€ä¸ªè¦è®¨è®ºçš„ï¼Œæ˜¯ conceptsï¼ˆæ¦‚å¿µï¼‰â€”â€”ä¸€ä¸ªéš¾äº§äº†å¾ˆå¤šå¹´æ‰ç»ˆäºè¿›å…¥ C++ çš„æ–°åŠŸèƒ½ã€‚ ä¸€ä¸ªå°ä¾‹å­ è€è§„çŸ©ï¼Œè¦è®²â€œæ¦‚å¿µâ€ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¾‹å­ã€‚ æˆ‘ä»¬çŸ¥é“ C++ é‡Œæœ‰é‡è½½ï¼Œå¯ä»¥æ ¹æ®å‚æ•°çš„ç±»å‹æ¥é€‰æ‹©åˆé€‚çš„å‡½...","head":[["meta",{"property":"og:url","content":"https://houbb.github.io/jk-it/posts/%E7%8E%B0%E4%BB%A3C__%E5%AE%9E%E6%88%9830%E8%AE%B2/%E6%9C%AA%E6%9D%A5%E7%AF%87/28%20_%20Concepts%EF%BC%9A%E5%A6%82%E4%BD%95%E5%AF%B9%E6%A8%A1%E6%9D%BF%E8%BF%9B%E8%A1%8C%E7%BA%A6%E6%9D%9F_.html"}],["meta",{"property":"og:site_name","content":"è€é©¬å•¸è¥¿é£"}],["meta",{"property":"og:title","content":"28 _ Conceptsï¼šå¦‚ä½•å¯¹æ¨¡æ¿è¿›è¡Œçº¦æŸ_"}],["meta",{"property":"og:description","content":"28 _ Conceptsï¼šå¦‚ä½•å¯¹æ¨¡æ¿è¿›è¡Œçº¦æŸ_ ä½ å¥½ï¼Œæˆ‘æ˜¯å´å’ç‚œã€‚ ä»è¿™ä¸€è®²å¼€å§‹ï¼Œæˆ‘ä»¬è¿›å…¥äº†æœªæ¥ç¯‡ï¼Œå±•æœ›ä¸€ä¸‹å³å°†åœ¨ C++20 å‡ºç°çš„æ–°åŠŸèƒ½ã€‚æˆ‘ä»¬ç¬¬ä¸€ä¸ªè¦è®¨è®ºçš„ï¼Œæ˜¯ conceptsï¼ˆæ¦‚å¿µï¼‰â€”â€”ä¸€ä¸ªéš¾äº§äº†å¾ˆå¤šå¹´æ‰ç»ˆäºè¿›å…¥ C++ çš„æ–°åŠŸèƒ½ã€‚ ä¸€ä¸ªå°ä¾‹å­ è€è§„çŸ©ï¼Œè¦è®²â€œæ¦‚å¿µâ€ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¾‹å­ã€‚ æˆ‘ä»¬çŸ¥é“ C++ é‡Œæœ‰é‡è½½ï¼Œå¯ä»¥æ ¹æ®å‚æ•°çš„ç±»å‹æ¥é€‰æ‹©åˆé€‚çš„å‡½..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-03-31T09:30:23.000Z"}],["meta",{"property":"article:modified_time","content":"2025-03-31T09:30:23.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"28 _ Conceptsï¼šå¦‚ä½•å¯¹æ¨¡æ¿è¿›è¡Œçº¦æŸ_\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-03-31T09:30:23.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"è€é©¬å•¸è¥¿é£\\",\\"url\\":\\"https://houbb.github.io\\"}]}"]]},"git":{"createdTime":1743411611000,"updatedTime":1743413423000,"contributors":[{"name":"binbin.hou","username":"","email":"binbin.hou@huifu.com","commits":2}]},"readingTime":{"minutes":14.35,"words":4304},"filePathRelative":"posts/ç°ä»£C++å®æˆ˜30è®²/æœªæ¥ç¯‡/28 _ Conceptsï¼šå¦‚ä½•å¯¹æ¨¡æ¿è¿›è¡Œçº¦æŸ_.md","localizedDate":"2025å¹´3æœˆ31æ—¥","excerpt":"\\n<p><audio id=\\"audio\\" title=\\"28 | Conceptsï¼šå¦‚ä½•å¯¹æ¨¡æ¿è¿›è¡Œçº¦æŸ?\\" controls=\\"\\" preload=\\"none\\"><source id=\\"mp3\\" src=\\"https://static001.geekbang.org/resource/audio/74/7d/74c10f01ecaa217624ce93a2747f387d.mp3\\"></audio></p>\\n<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å´å’ç‚œã€‚</p>\\n<p>ä»è¿™ä¸€è®²å¼€å§‹ï¼Œæˆ‘ä»¬è¿›å…¥äº†æœªæ¥ç¯‡ï¼Œå±•æœ›ä¸€ä¸‹å³å°†åœ¨ C++20 å‡ºç°çš„æ–°åŠŸèƒ½ã€‚æˆ‘ä»¬ç¬¬ä¸€ä¸ªè¦è®¨è®ºçš„ï¼Œæ˜¯ conceptsï¼ˆæ¦‚å¿µï¼‰â€”â€”ä¸€ä¸ªéš¾äº§äº†å¾ˆå¤šå¹´æ‰ç»ˆäºè¿›å…¥ C++ çš„æ–°åŠŸèƒ½ã€‚</p>","autoDesc":true}');export{d as comp,m as data};
